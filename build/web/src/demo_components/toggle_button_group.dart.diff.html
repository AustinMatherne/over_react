        <!DOCTYPE html>
        <html>
        <head>
          <title>Transformer Diff - web/src/demo_components/toggle_button_group.dart</title>
          <style>
            .diff-unmodified {
                color: #444;
            }
            .diff-removal {
                color: #a00;
                background-color: #fee;
                text-decoration: line-through;
            }
            .diff-addition {
                color: #0a0;
                background-color: #efe;
            }
          </style>
        </head>
        <body>
          <code>
            <pre><span class="diff-unmodified">part of over_react.web.demo_components;

/// A specialized [ButtonGroup] component that will surround one or more child
/// [ToggleButton] components so that a single shared [ToggleButtonGroupProps.name]
/// value can be applied to the aforementioned children via [cloneElement].
///
/// __Renders HTML Markup:__
///
///     &lt;div class="form-group {props.size.class} {props.formGroupProps.className}"&gt;
///       &lt;label class="control-label {props.groupLabelWidth.class}" for="{state.name}"&gt;
///         {props.groupLabel}
///       &lt;/label&gt;
///       &lt;div class="{props.wrapperClassName} {props.groupControlsWidth.class}"&gt;
///         &lt;div class="btn-group {props.buttonSize.class}" data-toggle="buttons" role="group"&gt;
///           {props.children}
///         &lt;/div&gt;
///       &lt;/div&gt;
///     &lt;/div&gt;
///
/// See: &lt;http://v4-alpha.getbootstrap.com/components/buttons/#checkbox-and-radio-buttons&gt;
@Factory()
UiFactory &lt;ToggleButtonGroupProps&gt; ToggleButtonGroup</span><span class="diff-addition"> = ([Map backingProps]) =&gt; new _$ToggleButtonGroupPropsImpl(backingProps)</span><span class="diff-unmodified">;

@Props()
class ToggleButtonGroupProps extends ButtonGroupProps with AbstractInputPropsMixin {</span><span class="diff-addition">    /* GENERATED CONSTANTS */ static const ConsumedProps $consumedProps = const ConsumedProps($props, $propKeys); static const List&lt;PropDescriptor&gt; $props = const []; static const List&lt;String&gt; $propKeys = const []; </span><span class="diff-unmodified">}

@State()
class ToggleButtonGroupState extends UiState with AbstractInputStateMixin {</span><span class="diff-addition">    /* GENERATED CONSTANTS */ static const List&lt;StateDescriptor&gt; $state = const []; static const List&lt;String&gt; $stateKeys = const []; </span><span class="diff-unmodified">}

@Component(subtypeOf: ButtonGroupComponent)
class ToggleButtonGroupComponent extends ButtonGroupComponent&lt;ToggleButtonGroupProps, ToggleButtonGroupState&gt;</span><span class="diff-addition"> with _$ToggleButtonGroupComponentImplMixin</span><span class="diff-unmodified"> {
  // Refs

  Map&lt;int, dynamic&gt; _toggleButtonRefs = &lt;int, dynamic&gt;{};

  /// The name to use for all children of a [ToggleButtonGroup].
  ///
  /// Attempts to use [ToggleButtonGroupProps.name] _(specified by the consumer)_, falling back to
  /// [ToggleButtonGroupState.name] _(auto-generated)_.
  String get name =&gt; props.name ?? state.name;

  @override
  Map getDefaultProps() =&gt; (newProps()
    ..addProps(super.getDefaultProps())
    ..toggleType = ToggleBehaviorType.CHECKBOX
  );

  @override
  Map getInitialState() =&gt; (newState()
    ..addAll(super.getInitialState())
    ..name = 'toggle_button_group_' + generateGuid()
  );

  @override
  get consumedProps =&gt; const [
    </span><span class="diff-removal">const $Props(ToggleButtonGroupProps)</span><span class="diff-addition">ToggleButtonGroupProps.$consumedProps /* GENERATED from $Props usage */</span><span class="diff-unmodified">,
  ];

  @override
  render() {
    var toggleButtons = [];

    for (int index = 0; index &lt; props.children.length; index++) {
      toggleButtons.add(renderToggleButton(props.children[index], index));
    }

    return renderButtonGroup(toggleButtons);
  }

  /// Render an individual child [ToggleButton], cloned to apply the shared [name] value.
  renderToggleButton(child, int index) {
    if (_isValidToggleButtonChild(child)) {
      var childProps = ToggleButton(getProps(child));
      var childKey = getInstanceKey(child);

      window.console.log(props);
      window.console.log('toggle_button_group name: ${name}');

      var propsToAdd = domProps()
        ..name = name
//        ..toggleType = props.toggleType
//        ..skin = props.skin ?? childProps.skin
        ..onChange = formEventCallbacks.chain(props.onChange, _handleOnChange)
        ..value = childProps.value ?? index
        ..key = childKey ?? index
        ..ref = chainRef(child, (ref) { _toggleButtonRefs[index] = ref; });

      return cloneElement(child, propsToAdd);
    }

    return child;
  }

  @override
  ClassNameBuilder getButtonGroupClasses() {
    return super.getButtonGroupClasses()
      ..add('btn-toggle-group');
  }

  /// The handler for when one of the children of the [ToggleButtonGroup] is changed or unchecked
  void _handleOnChange(_) {
    window.console.log('_handleOnChange');
    window.console.log(_);
    _toggleButtonRefs.values.forEach((childComponent) {
      if (childComponent is ToggleButtonComponent) childComponent._refreshState();
    });
  }

  bool _isValidToggleButtonChild(child) {
    var isCloneable = false;
    if (isValidElement(child)) {
      if (!isComponentOfType(child, ToggleButton)) {
        assert(ValidationUtil.warn(
            'Children of ToggleButtonGroup should be ToggleButton instances.'
        ));
      }

      isCloneable = true;
    } else if (child != null) {
      assert(ValidationUtil.warn(
          'You are not using a valid ReactElement.'
      ));
    }

    return isCloneable;
  }
}
</span><span class="diff-addition">


// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------
//
//   GENERATED IMPLEMENTATIONS
//

// React component factory implementation.
//
// Registers component implementation and links type meta to builder factory.
final $ToggleButtonGroupComponentFactory = registerComponent(() =&gt; new ToggleButtonGroupComponent(),
    builderFactory: ToggleButtonGroup,
    componentClass: ToggleButtonGroupComponent,
    isWrapper: false,
    parentType: $ButtonGroupComponentFactory, /* from `subtypeOf: ButtonGroupComponent` */
    displayName: 'ToggleButtonGroup'
);

// Concrete props implementation.
//
// Implements constructor and backing map, and links up to generated component factory.
class _$ToggleButtonGroupPropsImpl extends ToggleButtonGroupProps {
  /// The backing props map proxied by this class.
  @override
  final Map props;

  _$ToggleButtonGroupPropsImpl(Map backingMap) : this.props = backingMap ?? ({});

  /// Let [UiProps] internals know that this class has been generated.
  @override
  bool get $isClassGenerated =&gt; true;

  /// The [ReactComponentFactory] associated with the component built by this class.
  @override
  Function get componentFactory =&gt; $ToggleButtonGroupComponentFactory;

  /// The default namespace for the prop getters/setters generated for this class.
  @override
  String get propKeyNamespace =&gt; 'ToggleButtonGroupProps.';
}

// Concrete state implementation.
//
// Implements constructor and backing map.
class _$ToggleButtonGroupStateImpl extends ToggleButtonGroupState {
  /// The backing state map proxied by this class.
  @override
  final Map state;

  _$ToggleButtonGroupStateImpl(Map backingMap) : this.state = backingMap ?? ({});

  /// Let [UiState] internals know that this class has been generated.
  @override
  bool get $isClassGenerated =&gt; true;
}

// Concrete component implementation mixin.
//
// Implements typed props/state factories, defaults `consumedPropKeys` to the keys
// generated for the associated props class.
class _$ToggleButtonGroupComponentImplMixin {
  /// Let [UiComponent] internals know that this class has been generated.
  @override
  bool get $isClassGenerated =&gt; true;

  /// The default consumed props, taken from ToggleButtonGroupProps.
  /// Used in [UiProps.consumedProps] if [consumedProps] is not overridden.
  @override
  final List&lt;ConsumedProps&gt; $defaultConsumedProps = const [ToggleButtonGroupProps.$consumedProps];
  @override
  ToggleButtonGroupProps typedPropsFactory(Map backingMap) =&gt; new _$ToggleButtonGroupPropsImpl(backingMap);
  @override
  ToggleButtonGroupState typedStateFactory(Map backingMap) =&gt; new _$ToggleButtonGroupStateImpl(backingMap);
}

//
//   END GENERATED IMPLEMENTATIONS
//
// -----------------------------------------------------------------------------
// -----------------------------------------------------------------------------

</span><span class="diff-unmodified"></span></pre>
          </code>
        </body>
        </html>
    