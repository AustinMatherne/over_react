{% capture canonical_url %}{{ site.url }}{{ page.url | replace:'index.html','' }}{% endcapture %}
{% capture dartdocs_url %}https://www.dartdocs.org/documentation/{{ site.pkg_name }}/{{ site.latest_version }}{% endcapture %}
{% assign demo_data = false %}
{% assign demo_component_src_path = false %}
{% for demo in site.data.demos %}
    {% if demo.id == page.data_id %}
    {% assign demo_data = demo %}
    {% endif %}
{% endfor %}
{% capture demo_component_src_path %}{{ site.repo_url }}/blob/{{ site.demo_component_src_branch }}/web/src/demo_components/{% endcapture %}
{% assign page_title_short = false %}
{% assign page_title = false %}
{% assign page_lead = false %}
{% if page.title %}
    {% assign page_title_short = page.title %}
    {% capture page_title %}{{ page_title_short }} &middot; {{ site.title }}{% endcapture %}
{% elsif demo_data.title %}
    {% assign page_title_short = demo_data.title %}
    {% capture page_title %}{{ page_title_short }}{% endcapture %}
{% else %}
    {% assign page_title_short = site.title %}
    {% capture page_title %}{{ page_title_short }} &middot; {{ site.description | strip_html | strip_newlines }}{% endcapture %}
{% endif %}
{% if page.lead or demo_data.lead %}
    {% capture page_lead %}
        {% if page.lead %}
            {{ page.lead }}
        {% else %}
            {{ demo_data.lead }}
        {% endif %}
    {% endcapture %}
{% endif %}
{% capture page_description %}
    {% if page.excerpt %}
        {{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}
    {% elsif page_lead %}
        {{ page_lead | strip_html | strip_newlines | truncate: 160 }}
    {% else %}
        {{ site.description | strip_html | strip_newlines }}
    {% endif %}
{% endcapture %}
